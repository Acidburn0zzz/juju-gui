{
  "services": [
    {
      "name": "memcached",
      "exposed": false,
      "unit_count": 2,
      "charm": "cs:precise/memcached-6",
      "config": {
        "request-limit": -1,
        "slab-page-size": -1,
        "min-item-size": -1,
        "disable-large-pages": "no",
        "disable-cas": "no",
        "connection-limit": 1024,
        "udp-port": 0,
        "threads": -1,
        "disable-auto-cleanup": "no",
        "factor": -1.0,
        "tcp-port": 11211,
        "extra-options": "",
        "size": 768
      },
      "constraints": {
        "ubuntu-series": "precise",
        "provider-type": "ec2"
      }
    },
    {
      "name": "wordpress",
      "exposed": false,
      "unit_count": 1,
      "charm": "cs:precise/wordpress-10",
      "config": {
        "debug": "no",
        "tuning": "single",
        "wp-content": "https://github.com/jujutools/wordpress-site.git"
      },
      "constraints": {
        "ubuntu-series": "precise",
        "provider-type": "ec2"
      }
    },
    {
      "name": "mysql",
      "exposed": false,
      "unit_count": 1,
      "charm": "cs:precise/mysql-16",
      "config": {
        "tuning-level": "safest",
        "query-cache-size": -1,
        "query-cache-type": "ON",
        "binlog-format": "MIXED",
        "max-connections": -1,
        "preferred-storage-engine": "InnoDB",
        "dataset-size": "80%"
      },
      "constraints": {
        "ubuntu-series": "precise",
        "provider-type": "ec2"
      }
    },
    {
      "name": "mediawiki",
      "exposed": false,
      "unit_count": 10,
      "charm": "cs:precise/mediawiki-6",
      "config": {
        "debug": false,
        "name": "Please set name of wiki",
        "skin": "monobook"
      },
      "constraints": {
        "ubuntu-series": "precise",
        "provider-type": "ec2"
      }
    },
    {
      "name": "haproxy",
      "exposed": true,
      "unit_count": 1,
      "charm": "cs:precise/haproxy-16",
      "config": {
        "default_timeouts": "queue 1000, connect 1000, client 1000, server 1000",
        "global_log": "127.0.0.1 local0, 127.0.0.1 local1 notice",
        "global_spread_checks": 0,
        "global_debug": false,
        "default_options": "httplog, dontlognull",
        "monitoring_allowed_cidr": "127.0.0.1/32",
        "monitoring_port": 10000,
        "global_user": "haproxy",
        "monitoring_username": "haproxy",
        "default_log": "global",
        "enable_monitoring": false,
        "monitoring_password": "changeme",
        "default_mode": "http",
        "global_group": "haproxy",
        "monitoring_stats_refresh": 3,
        "default_retries": 3,
        "services": "- service_name: haproxy_service\n  service_host: \"0.0.0.0\"\n  service_port: 80\n  service_options: [balance leastconn]\n  server_options: maxconn 100\n",
        "global_maxconn": 4096,
        "global_quiet": false
      },
      "constraints": {
        "ubuntu-series": "precise",
        "provider-type": "ec2"
      }
    }
  ],
  "relations": [
    [
      [
        "haproxy",
        "http",
        "reverseproxy",
        "client",
        "global"
      ],
      [
        "mediawiki",
        "http",
        "website",
        "server",
        "global"
      ]
    ],
    [
      [
        "mysql",
        "mysql",
        "db",
        "server",
        "global"
      ],
      [
        "wordpress",
        "mysql",
        "db",
        "client",
        "global"
      ]
    ],
    [
      [
        "mediawiki",
        "mysql",
        "db",
        "client",
        "global"
      ],
      [
        "mysql",
        "mysql",
        "db",
        "server",
        "global"
      ]
    ],
    [
      [
        "mediawiki",
        "memcache",
        "cache",
        "client",
        "global"
      ],
      [
        "memcached",
        "memcache",
        "cache",
        "server",
        "global"
      ]
    ],
    [
      [
        "wordpress",
        "reversenginx",
        "loadbalancer",
        "peer",
        "global"
      ]
    ]
  ],
  "constraints": {
    "provider-type": "ec2"
  }
}
