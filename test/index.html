<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="assets/mocha.css">
  <script src="/juju-ui/assets/modules.js"></script>
  <script src="/juju-ui/assets/all-yui.js"></script>
  <!-- Since only the tests depend on these files and the prod tests disable
    the YUI loader, we have to include them manually here. -->
  <script src="/juju-ui/assets/event-simulate.js"></script>
  <script src="/juju-ui/assets/node-event-simulate.js"></script>
  <script src="assets/chai.js"></script>
  <script src="assets/mocha.js"></script>
  <script src="utils.js"></script>
  <script>
    var assert = chai.assert,
        expect = chai.expect
        should = chai.should();
    mocha.setup({ui: 'bdd', ignoreLeaks: false})
  </script>

  <script src="test_d3_components.js"></script>
  <script src="test_topology.js"></script>
  <script src="test_env.js"></script>
  <script src="test_model.js"></script>
  <script src="test_notifications.js"></script>
  <script src="test_app.js"></script>
  <script src="test_unit_view.js"></script>
  <script src="test_charm_collection_view.js"></script>
  <script src="test_charm_view.js"></script>
  <script src="test_environment_view.js"></script>
  <script src="test_service_config_view.js"></script>
  <script src="test_service_view.js"></script>
  <script src="test_utils.js"></script>
  <script src="test_login_view.js"></script>
  <script src="test_charm_panel.js"></script>
  <script src="test_charm_configuration.js"></script>
  <script src="test_console.js"></script>
  <script src="test_endpoints.js"></script>
  <script src="test_application_notifications.js"></script>
  <script src="test_charm_store.js"></script>
  <script src="test_app_hotkeys.js"></script>
  <script src="test_notifier_widget.js"></script>

  <script>
  YUI().use('node', 'event', function(Y) {
     Y.on('domready', function() {

     var config = GlobalConfig;
     for (group in config.groups) {
       var group = config.groups[group];
       for (m in group.modules) {
         var resource = group.modules[m];
         if (!m || !resource.fullpath) {
           continue
         }
         resource.fullpath = resource.fullpath.replace(
           '/juju-ui/', '../juju-ui/', 1);
         // If we load modules asyncronously then the module loading may take
         // so long that the test definitions (and before/after calls) happen
         // *after* the test runner is invoked.  In which case the test runner
         // will not know about the tests and therefore not run them.
         resource.async = false;
       }
     }
     // Load before test runner
     mocha.run();
     });
  });
  </script>

</head>

<body>
  <div id="main" class="container">
  </div>
  <div id="mocha"></div>
</body>
</html>
