<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Juju Admin</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Juju team">
    <link rel="stylesheet" href="/assets/stylesheets/bootstrap-2.0.4.css">
    <link rel="stylesheet" href="/assets/stylesheets/bootstrap-responsive-2.0.4.css">
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <style>
      svg { border: 2px solid black; }
      svg {stroke-width: 0;}

      charms.thumbnails.li { height:4em; }
      line.relation { stroke: #000000; stroke-width: 1px;}
      .state-error { stroke: #FF0000; }
      .state-started { stroke: #000000;}
      .state-pending { stroke: #6597E8;}

      g.service .charm-label { font-size: 0.7em;
                               fill: #ffffff;}
      g.service .name { font-weight: bold;
                        font-family: "Ubuntu";
                        font-size: 1.6em; fill: #1626cf;}
      g.service .service-border {stroke-width: 2px;}
      g.service .unit-count {
                stroke: #000000; stroke-width: 1px;
                font-family: "Ubuntu";
                fill: #ffffff; font-size: 2.5em;}
      g.service { fill: #a0a0a0; stroke: black;}

      g.unit .address {fill: #ffffff; font-size: 0.8em;}
      g.unit .unit-border { stroke-width: 2px; fill: #a0a0a0;}
      g.unit { stroke-width: 0; font-weight: bold;
               font-family: "Ubuntu"; font-size: 1.2em; fill: #1626cf;}
    </style>
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">

        <div class="container">
	    
              <a class="brand" href="/">
	        <img height="32" alt="Juju GUI" src="/assets/images/juju-white.png">
              </a>

	     <!--
	    <div class="row">
	      <div class="span7">
	      </div>
	    <div class="span3">
	      <span class="btn-group input-tiny">
		<a class="btn">1</a>
		<a class="btn">2</a>
		<a class="btn">3</a>
	      </span>
	    </div>
	    <div class="span2">
	    </div>
	    -->
	      <form id="omnibar" class="navbar-search pull-right yui3-skin-sam" method="GET">
		<input id="charm-search" name="query" type="text" class="search-query span3" 
		       placeholder="Search"/>
		<!-- <input id="omnibar-submit" class="btn" type="submit" value="search"/> -->
	      </form>

        </div>
      </div>
    </div>

    <br>
    <br>
    <br>

    <div id="main" class="container">
    </div> <!-- /container -->


    <script id="t-overview" type="text/x-handlebars-template">
      <div id="canvas"></div>
    </script>

    <script id="t-service-config" type="text/x-handlebars-template">
    </script>

    <script id="t-service" type="text/x-handlebars-template">
      <div class="row">
	<div class="span8">
	  <h1> Service {{service.id}}</h1>
	  <br/> <br/>
	  <div class="btn-group">
	    <button class="btn"><i class="icon-cog"></i> Settings </button>
	    <button class="btn"><i class="icon-th"></i> Constraints</button>
	    <a href="/charms/charms/{{charm.charm_name}}/json"
	       class="btn"><i class="icon-book"></i> Charm </a>
	    <button class="btn"><i class="icon-ban-circle"></i> Exposed </button>
	    <button class="btn"><i class="icon-random"></i> Relations </button>
	  </div>
	</div>
	<div class="span4">
	  <div class="well">
	    <span>
	      <b>Charm:</b>
	      <a href="/charms/charms/{{charm.charm_name}}/json">{{charm.id}}</a></span>
	    <br/>
	    <span> <b>Units:</b></span>
	    <br/>
	    <span> <b>Relations:</b></span>
	    <br/>
	    <span><b>Exposed:</b> {{service.exposed}}</span>
	    <br/>
	  </div>
	</div>
      </div>

      <div class="row">
	<!--
	<div class="span8">
	  <ul class="nav nav-tabs">
	    <li class="active"><h5>Units</h5></li>
	  </ul>
	</div> -->
	<div class="span12">
	  <ul class="nav nav-tabs">
	    <li class="active"><a href=".">All</a></li>
	    <li><a href="?state=running">Running</a></li>
	    <li><a href="?state=pending">Pending</a></li>
	    <li><a href="?state=error">Error</a></li>
	  </ul>
	</div>
      </div>


      <div class="collection">
	<div class="charm">
	  <ul class="thumbnails">
	    {{#units}}
	    <li class="span3">
	      <div class="thumbnail well" id="{{id}}">
		<h5>{{id}}</h5>
		<span>{{agent_state}}</span> <br/>
		<span>{{public_address}}</span>
	      </div>
	    </li>
	    {{/units}}	    
	  </ul>
	</div>
      </div>

    </script>

    <script id="t-charm" type="text/x-handlebars-template">
      <h1> Charm </h1>
      <div class="row">
	<div class="span8">
	  <form class="form-horizontal">
	    <fieldset>
	      <div class="control-group">
		<label class="control-label">Name</label>
		<div class="controls">{{charm.name}}</div>
	      </div>
	      <div class="control-group">
		<label class="control-label">Series</label>
		<div class="controls">{{charm.series}}</div>
	      </div>
	      <div class="control-group">
		<label class="control-label">Summary</label>
		<div class="controls">{{charm.summary}}</div>
	      </div>
	      <div class="control-group">
		<label class="control-label">Description</label>
		<div class="controls">{{charm.description}}</div>
	      </div>
	      
	      <div class="control-group">
		<label class="control-label">Last Change</label>
		<div class="controls">
		  {{#with charm.last_change}}
		  {{created}} <br/> {{committer}} <br/> {{message}}
		  {{/with}}
		</div>
	      </div>
	    </fieldset>
	  </form>
	</div>
	<div class="span4">
	  <input id="charm-deploy" value="Deploy" type="submit" class="btn btn-inverse"></input>

	  <hr/>
	  <b>Provides</b>
	  <ul>
	  {{#iflat charm.provides}}
	     <li>{{interface}}</li>
	  {{/iflat}}
	  </ul>

	  <b>Requires</b>
	  <ul>
	  {{#iflat charm.requires}}
	     <li>{{interface}}</li>
	  {{/iflat}}
	  </ul>
	</div>
      </div>
    </script>

    <script id="t-charm-collection" type="text/x-handlebars-template">
      <div>
        <h1>Charm Collection</h1>
	<form class="well form-inline">
	  <label>Series <input type="text" class="input-small" placeholder="Precise"></label>
	  <label>Owner <input type="text" class="input-small" placeholder="Ubuntu"></label>
	  <label>Provides <input type="text" class="input-small" placeholder="Owner"></label>
	  <label>Requires <input type="text" class="input-small" placeholder="Owner"></label>
	  <label>
	    Sort 
	    <select class="input-small">
	      <option>Match</option>
	      <option>Modified</option>
	      <option>Owner</option>
	      <option>Series</option>
	    </select>
	  </label>
	  <button type="submit" class="btn">Search</button>
	</form>
	<div class="collection">
	  <div class="charm">
	    <ul class="thumbnails">
              {{#charms}}
              <li class="span3">
		<div class="thumbnail" data-charm-url="{{data_url}}">
		  <h5>~{{owner}}/{{series}}/{{name}} <i class="icon-user"></i></h5>
		  <span>{{summary}}</span>
		</div>
	      </li>
              {{/charms}}
	    </ul>
	  </div>
	</div>
      </div>
    </script>

    <!-- javascript away -->
    <script src="/assets/javascripts/yui/yui/yui-debug.js"></script>
    <script src="/modules.js"></script>
    <script>
      YUI(GlobalConfig).use("juju-gui", function(Y) {
      app = new Y.juju.App({
              serverRouting: false,
              html5: true,
              socket_url: "ws://localhost:8082/ws",
              contain : "#main",
              viewContainer: "#main",
              transitions: true
          }).render();
      });
    </script>
  </body>
</html>
