<div class="charm yui3-g">
    <div class="content yui3-u-{{#if isFullscreen}}3-4{{else}}1{{/if}}">
        <div class="heading">
                {{#unless isFullscreen}}<a href="" class="back icon"></a>{{/unless}}
            <div class="block-icon">
                <img src="{{charmIconPath store_id}}" alt="{{ name }} icon" class="icon">
            </div>
            <div class="charm-details">
                <h1>{{ name }}</h1>
                <div class="add-reviewed">
                    {{#if is_approved}}
                        <div>
                            <i class="sprite approved_star"></i>
                            Reviewed by the Juju team
                        </div>
                    {{/if}}
                    {{! The add class is used by the deploy method in
                        test/test_charm_running.py.  If you change this name, change
                        the other one too! }}
                    <a href="" class="add">Add to my canvas</a>
                </div>
                <ul>
                    <li>
                        Activity: {{ downloads }}
                        {{pluralize 'Download' downloads}},
                        {{ commitCount }}
                        {{pluralize 'Commit' commitCount}}
                    </li>
                    <li>Ubuntu series: {{ distro_series }}</li>
                    <li>Location: {{ url }}</li>
                    <li>
                        Links:
                        <a href="{{ sourceLink }}">Source</a>
                        <a href="{{ code_source.bugs_link }}">Bugs</a>
                    </li>
                </ul>

                {{#if isFullscreen}}
                    {{>providers}}
                {{/if}}
            </div>
        </div>

        <div class="tabs">
            <ul>
                <li><a href="#bws-summary" class="bws-summary">Summary</a></li>
                <li><a href="#bws-readme" class="bws-readme">Readme</a></li>
                <li><a href="#bws-interfaces" class="bws-interfaces">Interfaces</a></li>
                <li><a href="#bws-configuration" class="bws-configuration">Configuration</a></li>
                <li><a href="#bws-source" class="bws-source">Source</a></li>
                <li><a href="#bws-qa" class="bws-qa">Quality</a></li>
            </ul>
            <hr />
            <span id="sharing">
              <a href="http://twitter.com/home?status={{ twitterText }}" title="Share on twitter">
                <i class="sprite twitter-normal"></i>
              </a>
              <a href="https://plus.google.com/share?url={{ link }}" title="Share on G+">
                <i class="sprite google-normal"></i>
              </a>
              <a href="mailto:?subject={{ emailSubject }}&body={{ emailText }}" title="Share with email">
                <i class="sprite email-normal"></i>
              </a>
            </span>
            <div>
                <div id="bws-summary">
                    <div class="summary">
                        {{#unless isFullscreen}}
                            {{>providers}}
                            <h2>Summary</h2>
                        {{/unless}}
                        <p>{{ summary }}</p>
                        <h2>Description</h2>
                        <p class="respect-whitespace">{{#if isFullscreen}}{{ description }}{{else}}{{ truncate description 300 }}{{/if}}</p>
                    </div>

                    <div class="changelog">
                        <h3 class="section-title">
                            {{#if recent_commits}}
                                <a href="" class="expandToggle"
                                    data-state="closed">
                            {{/if}}
                            Change log
                            {{#if recent_commits}}
                                    <span class="expand">
                                        <span class="more">
                                            <img src="/juju-ui/assets/images/expand_icon.png"
                                                alt="Expand" />
                                        </span>
                                        <span class="less hidden">
                                            <img src="/juju-ui/assets/images/contract_icon.png"
                                                alt="Contract" />
                                        </span>
                                    </span>
                                </a>
                            {{/if}}
                        </h3>
                        {{#if recent_commits}}
                            <div class="first">
                                <p>
                                    Latest change:
                                    <span class="date">
                                        {{prettyCommits.first.prettyDate}}
                                    </span>
                                    <strong>{{prettyCommits.first.author.name}}</strong>
                                    <span class="respect-whitespace">{{prettyCommits.first.message}}</span> -
                                    <a href="{{ prettyCommits.first.revnoLink }}">
                                      REVNO{{prettyCommits.first.revno}}
                                    </a>
                                </p>
                            </div>
                            <div class="remaining hidden">
                                <p class="maintainer">
                                    Maintained by {{ maintainer.name }}
                                </p>
                                <h4>Earlier changes</h4>
                                <ul>
                                    {{#prettyCommits.remaining}}
                                        <li>
                                            <span class="date">
                                                {{prettyDate}}
                                            </span>
                                            <strong>{{author.name}}</strong> <span class="respect-whitespace">{{message}}</span> -
                                            <a href="{{ revnoLink }}">
                                                REVNO{{revno}}
                                            </a>
                                        </li>
                                    {{/prettyCommits.remaining}}
                                </ul>
                            </div>
                        {{else}}
                            <p>No change history exists.</p>
                        {{/if}}
                    </div>
                    {{#if isFullscreen}}
                        <div class="related-charms">
                        </div>
                    {{/if}}
                </div>
                <div id="bws-readme">Readme</div>
                <div id="bws-interfaces">
                    <p class="intro">
                        Interfaces determine how this charm relates to other charms. A relationship between charms can only be made if they share a common interface.
                        {{#if interfaceIntro.noRequiresNoProvides}}
                            <br />
                            <br />
                            This charm does not have any interfaces.
                        {{/if}}
                        {{#if interfaceIntro.noRequiresOneProvides}}
                            This charm provides only one interface to another charm.
                        {{/if}}
                        {{#if interfaceIntro.noRequiresManyProvides}}
                            This charm requires no interfaces to be provided by other charms, but provides several interfaces that can be used by other charms.
                        {{/if}}
                        {{#if interfaceIntro.oneRequiresNoProvides}}
                            This charm requires only one interface to be provided by another charm.
                        {{/if}}
                        {{#if interfaceIntro.oneRequiresOneProvides}}
                            This charm requires only one interface to be provided by another charm. Similarly, this charm provides one interface that can be used by other charms.
                        {{/if}}
                        {{#if interfaceIntro.oneRequiresManyProvides}}
                            This charm requires only one interface to be provided by another charm, but provides several interfaces that can be used by other charms.
                        {{/if}}
                        {{#if interfaceIntro.manyRequiresNoProvides}}
                            This charm requires certain interfaces to be provided by other charms, but provides no interfaces itself.
                        {{/if}}
                        {{#if interfaceIntro.manyRequiresOneProvides}}
                            This charm requires certain interfaces to be provided by other charms, but provides only one interface to another charm.
                        {{/if}}
                        {{#if interfaceIntro.manyRequiresManyProvides}}
                            This charm requires certain interfaces to be provided by other charms. Similarly, this charm provides other interfaces that can be used by other charms.
                        {{/if}}
                    </p>
                    {{#if requires}}
                        <div class="yui3-g">
                            <div class="interfaces-heading yui3-u-1-2">
                                <h3>Requires</h3>
                            </div>
                            <div class="interfaces-heading yui3-u-1-2">
                                <h3>Related charms</h3>
                            </div>
                            <div class="yui3-u-1-3">
                            </div>

                            <ul class="interface-list yui3-u-1">
                                {{#arrayObject requires}}
                                    <li class="interface-row yui3-g">
                                        <div class="interface yui3-u-1-2">
                                            <h4>{{value.interface}}</h4>
                                            <div>{{key}}</div>
                                        </div>

                                        <div class="related yui3-u-1-2" data-interface="provides-{{value.interface}}">
                                        </div>
                                    </li>
                                {{/arrayObject}}
                            </ul>
                        </div>
                    {{/if}}
                    {{#if provides}}
                        <div class="yui3-g">
                            <div class="interfaces-heading yui3-u-1-2">
                                <h3>Provides</h3>
                            </div>
                            <div class="interfaces-heading yui3-u-1-2">
                                <h3>Related charms</h3>
                            </div>
                            <div class="yui3-u-1-3">
                            </div>
                        </div>
                        <ul class="interface-list">
                            {{#arrayObject provides}}
                                <li class="interface-row yui3-g-u-1">
                                    <div class="yui3-g">
                                        <div class="interface yui3-u-1-2">
                                            <h4>{{value.interface}}</h4>
                                            <div>{{key}}</div>
                                        </div>

                                        <div class="related yui3-u-1-2" data-interface="requires-{{value.interface}}">
                                        </div>
                                    </div>
                                </li>
                            {{/arrayObject}}
                        </ul>
                    {{/if}}
                </div>
                <div id="bws-configuration">
                    <p class="intro">
                        These are the ways in which you can configure this
                        charm to best suit your deployment. You can change the
                        default configuration settings either before or after
                        you have deployed the charm, if necessary.
                    </p>
                    {{#if options}}
                        <dl>
                            {{#arrayObject options}}
                                <dt>
                                    <dfn>{{key}}</dfn>
                                    <em>{{value.type}}</em>
                                </dt>
                                <dd>
                                    <div>Default: {{value.default}}</div>
                                    <p>{{value.description}}</p>
                                </dd>
                            {{/arrayObject}}
                        </dl>
                    {{else}}
                      <p>This charm does not expose any configuration options.</p>
                    {{/if}}
                </div>
                <div id="bws-source">
                    <p class="intro">
                        The source code of the charm includes scripts, metadata,
                        and other supporting files to describe and install a
                        service.
                    </p>
                    <p class="intro">
                        <a href="https://juju.ubuntu.com/docs/authors-charm-store.html"
                        target="help">Please contribute to this charm!</a>
                    </p>
                    <p class="intro">
                        Select a file below to view the contents.
                    </p>
                    <select>
                        <option>Select --</option>
                        {{#each files}}
                            <option value="{{ . }}">{{ . }}</option>
                        {{/each}}
                    </select>
                    <div class="filecontent">
                    </div>
                </div>
                <div id="bws-qa">Quality</div>
            </div>
        </div>
    </div>
</div>
